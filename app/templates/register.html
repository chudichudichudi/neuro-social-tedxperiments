{% from '_macros.html' import render_field %}

{% extends '/layouts/boilerplate.html' %}

{% block body_class %}main main-register{% endblock %}

{% macro social_register(provider_id, display_name) %}
  <form action="{{ url_for('social.login', provider_id=provider_id) }}" method="POST">
    <button type="submit" class="btn btn-primary btn-large">Entra con {{ display_name }}</button>
  </form>
{% endmacro %}

{% block layout %}
<div class="page-header centered-text">
  <h1>Registrarte</h1>
</div>
{% if login_failed %}
<h3>Registrarse con la cuenta de {{ provider.name }}: {{ connection_values['display_name'] }}</h3>
{% endif %}
<div class="row-fluid content">
  
  <div class="span1">&nbsp;</div>
  <div class="span5 centered-text">
    <form class="well" action="{{ url_for('register', provider_id=provider.id if provider else None) }}" method="POST">
      {{ form.hidden_tag() }}
      {{ render_field(form.email) }}
      {{ render_field(form.password) }}
      {{ render_field(form.confirm) }}
      <button type="submit" class="btn btn-primary btn-large">Crear Usuario</button>
    </form>
  </div>
  {% if not login_failed %}
  <div class="span5 centered-text " style="margin-top:60px;">
    {{ social_register('twitter', 'Twitter' )}}
    {{ social_register('facebook', 'Facebook' )}}
    <!-- {{ social_register('github', 'GitHub' )}} -->
  </div>
  <div class="span1">&nbsp;</div>
  {% endif %}
</div>
{% endblock %}